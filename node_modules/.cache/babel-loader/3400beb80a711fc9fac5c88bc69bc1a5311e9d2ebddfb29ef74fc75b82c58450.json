{"ast":null,"code":"import{Box,Button,Container,Heading,Text,VStack}from'@chakra-ui/react';import axios from'axios';import React,{useState}from'react';import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{buySubscription}from'../../redux/actions/user';import{server}from'../../redux/store';import toast from'react-hot-toast';import logo from'../../assets/images/logo.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Subscribe=_ref=>{let{user}=_ref;const dispatch=useDispatch();const[key,setKey]=useState('');const{loading,error,subscriptionId}=useSelector(state=>state.subscription);const{error:courseError}=useSelector(state=>state.course);const subscribeHandler=async()=>{const{data:{key}}=await axios.get(\"\".concat(server,\"/razorpaykey\"));setKey(key);dispatch(buySubscription());};useEffect(()=>{if(error){toast.error(error);dispatch({type:'clearError'});}if(courseError){toast.error(courseError);dispatch({type:'clearError'});}if(subscriptionId){const openPopUp=()=>{const options={key,name:'CourseMania',description:'Get access to all premium content',image:logo,subscription_id:subscriptionId,callback_url:\"\".concat(server,\"/paymentverification\"),prefill:{name:user.name,email:user.email,contact:''},notes:{address:'Pro Pack Programmer'},theme:{color:'#FFC800'}};const razor=new window.Razorpay(options);razor.open();};openPopUp();}},[dispatch,error,courseError,user.name,user.email,key,subscriptionId]);return/*#__PURE__*/_jsxs(Container,{h:\"90vh\",p:\"16\",children:[/*#__PURE__*/_jsx(Heading,{children:\"Welcome\",my:\"8\",textAlign:'center'}),/*#__PURE__*/_jsxs(VStack,{boxShadow:'lg',alignItems:\"stretch\",borderRadius:'lg',spacing:\"0\",children:[/*#__PURE__*/_jsx(Box,{bg:\"yellow.400\",p:'4',css:{borderRadius:'8px 8px 0 0'},children:/*#__PURE__*/_jsx(Text,{color:'black',children:\"Pro Pack - \\u20B9299.00\"})}),/*#__PURE__*/_jsxs(Box,{p:\"4\",children:[/*#__PURE__*/_jsxs(VStack,{textAlign:'center',px:\"8\",mt:'4',spacing:\"8\",children:[/*#__PURE__*/_jsx(Text,{children:\"Join pro pack and get access to all content.\"}),/*#__PURE__*/_jsx(Heading,{size:\"md\",children:'₹299 Only'})]}),/*#__PURE__*/_jsx(Button,{my:\"8\",w:\"full\",colorScheme:'yellow',onClick:subscribeHandler,isLoading:loading,children:\"Buy Now\"})]}),/*#__PURE__*/_jsxs(Box,{bg:\"blackAlpha.600\",p:\"4\",css:{borderRadius:'0 0 8px 8px'},children:[/*#__PURE__*/_jsx(Heading,{color:'white',textTransform:\"uppercase\",size:\"sm\",children:'100% refund at cancellation'}),/*#__PURE__*/_jsx(Text,{fontSize:'xs',color:\"white\",children:'*Terms & Conditions Apply'})]})]})]});};export default Subscribe;","map":{"version":3,"names":["Box","Button","Container","Heading","Text","VStack","axios","React","useState","useEffect","useDispatch","useSelector","buySubscription","server","toast","logo","jsx","_jsx","jsxs","_jsxs","Subscribe","_ref","user","dispatch","key","setKey","loading","error","subscriptionId","state","subscription","courseError","course","subscribeHandler","data","get","concat","type","openPopUp","options","name","description","image","subscription_id","callback_url","prefill","email","contact","notes","address","theme","color","razor","window","Razorpay","open","h","p","children","my","textAlign","boxShadow","alignItems","borderRadius","spacing","bg","css","px","mt","size","w","colorScheme","onClick","isLoading","textTransform","fontSize"],"sources":["C:/Users/RAHUL/OneDrive/Desktop/coursebundler-main/CourseBundler SourceCode/frontend/src/components/Payments/Subscribe.jsx"],"sourcesContent":["import {\r\n  Box,\r\n  Button,\r\n  Container,\r\n  Heading,\r\n  Text,\r\n  VStack,\r\n} from '@chakra-ui/react';\r\nimport axios from 'axios';\r\nimport React, { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { buySubscription } from '../../redux/actions/user';\r\nimport { server } from '../../redux/store';\r\nimport toast from 'react-hot-toast';\r\nimport logo from '../../assets/images/logo.png';\r\n\r\nconst Subscribe = ({ user }) => {\r\n  const dispatch = useDispatch();\r\n  const [key, setKey] = useState('');\r\n\r\n  const { loading, error, subscriptionId } = useSelector(\r\n    state => state.subscription\r\n  );\r\n  const { error: courseError } = useSelector(state => state.course);\r\n\r\n  const subscribeHandler = async () => {\r\n    const {\r\n      data: { key },\r\n    } = await axios.get(`${server}/razorpaykey`);\r\n\r\n    setKey(key);\r\n    dispatch(buySubscription());\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      toast.error(error);\r\n      dispatch({ type: 'clearError' });\r\n    }\r\n    if (courseError) {\r\n      toast.error(courseError);\r\n      dispatch({ type: 'clearError' });\r\n    }\r\n    if (subscriptionId) {\r\n      const openPopUp = () => {\r\n        const options = {\r\n          key,\r\n          name: 'CourseMania',\r\n          description: 'Get access to all premium content',\r\n          image: logo,\r\n          subscription_id: subscriptionId,\r\n          callback_url: `${server}/paymentverification`,\r\n          prefill: {\r\n            name: user.name,\r\n            email: user.email,\r\n            contact: '',\r\n          },\r\n          notes: {\r\n            address: 'Pro Pack Programmer',\r\n          },\r\n          theme: {\r\n            color: '#FFC800',\r\n          },\r\n        };\r\n\r\n        const razor = new window.Razorpay(options);\r\n        razor.open();\r\n      };\r\n      openPopUp();\r\n    }\r\n  }, [\r\n    dispatch,\r\n    error,\r\n    courseError,\r\n    user.name,\r\n    user.email,\r\n    key,\r\n    subscriptionId,\r\n  ]);\r\n\r\n  return (\r\n    <Container h=\"90vh\" p=\"16\">\r\n      <Heading children=\"Welcome\" my=\"8\" textAlign={'center'} />\r\n\r\n      <VStack\r\n        boxShadow={'lg'}\r\n        alignItems=\"stretch\"\r\n        borderRadius={'lg'}\r\n        spacing=\"0\"\r\n      >\r\n        <Box bg=\"yellow.400\" p={'4'} css={{ borderRadius: '8px 8px 0 0' }}>\r\n          <Text color={'black'} children={`Pro Pack - ₹299.00`} />\r\n        </Box>\r\n        <Box p=\"4\">\r\n          <VStack textAlign={'center'} px=\"8\" mt={'4'} spacing=\"8\">\r\n            <Text children={`Join pro pack and get access to all content.`} />\r\n            <Heading size=\"md\" children={'₹299 Only'} />\r\n          </VStack>\r\n\r\n          <Button\r\n            my=\"8\"\r\n            w=\"full\"\r\n            colorScheme={'yellow'}\r\n            onClick={subscribeHandler}\r\n            isLoading={loading}\r\n          >\r\n            Buy Now\r\n          </Button>\r\n        </Box>\r\n\r\n        <Box bg=\"blackAlpha.600\" p=\"4\" css={{ borderRadius: '0 0 8px 8px' }}>\r\n          <Heading\r\n            color={'white'}\r\n            textTransform=\"uppercase\"\r\n            size=\"sm\"\r\n            children={'100% refund at cancellation'}\r\n          />\r\n\r\n          <Text\r\n            fontSize={'xs'}\r\n            color=\"white\"\r\n            children={'*Terms & Conditions Apply'}\r\n          />\r\n        </Box>\r\n      </VStack>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Subscribe;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}